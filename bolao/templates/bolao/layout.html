{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Pennini Bet - Navbar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'bolao/css/style.css' %}">

</head>

<body>

  <nav>
    <!-- Left -->
    <div class="nav-left">
      <a href="#" class="logo">
        <img src="{% static 'bolao/img/logo_bola.svg' %}" alt="Meu Ícone">
        <span>Pennini Bet</span>
      </a>
      <!-- Mobile Menu Button -->
      <button class="mobile-menu-btn" id="mobileMenuBtn">
        <span></span>
        <span></span>
        <span></span>
      </button>

    <!-- Navigation Links -->
      <div class="nav-links" id="navLinks">
        <a href="#" class="active">Home</a>
        <a href="#">Events</a>
        <a href="#">Orders</a>
        <a href="#">Settings</a>
      </div>
    </div>

    <!-- Right -->
    <div class="nav-right">
      {% if user.is_authenticated %}
      <div class="profile">
        <img src="https://randomuser.me/api/portraits/women/44.jpg" class="avatar" id="avatar"
          alt="{{ user.username }}">
        <div class="dropdown" id="dropdownMenu">
          <a href="#">👤 Meu Perfil</a>
          <a href="{% url 'logout' %}" class="logout-link">🚪 Sair</a>
        </div>
      </div>
      {% else %}
      <div class="auth-buttons">
        <a href="{% url 'login' %}" class="btn btn-login">Entrar</a>
        <a href="{% url 'register' %}" class="btn btn-register">Criar conta</a>
      </div>
      {% endif %}
    </div>
  </nav>

  {% block content %}
  {% endblock content %}

  <script>
    // Avatar dropdown
    {% if user.is_authenticated %}
        const avatar = document.getElementById('avatar');
        const dropdown = document.getElementById('dropdownMenu');

        avatar.addEventListener('click', () => {
        dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        });

        // Fecha o menu se clicar fora
        window.addEventListener('click', function (e) {
        if (!avatar.contains(e.target) && !dropdown.contains(e.target)) {
            dropdown.style.display = 'none';
        }
        });
    {% endif %}

    // Mobile menu
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const navLinks = document.getElementById('navLinks');

    mobileMenuBtn.addEventListener('click', () => {
      mobileMenuBtn.classList.toggle('active');
      navLinks.classList.toggle('active');
    });

    // Fecha o menu mobile ao clicar em um link
    navLinks.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        mobileMenuBtn.classList.remove('active');
        navLinks.classList.remove('active');
      });
    });

    // Fecha o menu mobile ao redimensionar a tela para desktop
    window.addEventListener('resize', () => {
      if (window.innerWidth > 768) {
        mobileMenuBtn.classList.remove('active');
        navLinks.classList.remove('active');
      }
    });
  </script>

</body>

</html>